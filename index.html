<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Kyoto Station Proximity Message</title>
  <style>
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0;
      min-height: 100vh;
      background: linear-gradient(135deg, #f2e9e1 0%, #c9e7ff 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    .container {
      background: #fff;
      border-radius: 20px;
      box-shadow: 0 6px 32px rgba(50,50,93,.1), 0 1.5px 6px rgba(0,0,0,.07);
      padding: 2.5em 2em;
      text-align: center;
      max-width: 400px;
    }
    h1 {
      color: #2d4a6e;
      font-size: 2em;
      margin-bottom: 1em;
      font-weight: 700;
      letter-spacing: 0.05em;
    }
    #checkBtn {
      background: linear-gradient(90deg, #6ec1e4, #8878c3);
      color: white;
      border: none;
      outline: none;
      font-size: 1.2em;
      padding: 0.75em 2em;
      border-radius: 40px;
      box-shadow: 0 2px 8px rgba(0,0,0,.11);
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
      margin-top: .5em;
    }
    #checkBtn:hover, #checkBtn:focus {
      background: linear-gradient(90deg, #8878c3, #6ec1e4);
      transform: translateY(-2px) scale(1.05);
    }
    #message {
      font-size: 1.4em;
      color: #007944;
      margin-top: 1.5em;
      font-weight: 600;
    }
    #error {
      color: #b30000;
      margin-top: 1.2em;
      font-size: 1em;
      font-weight: 500;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Kyoto Station Proximity Checker</h1>
    <button id="checkBtn">Check My Location</button>
    <div id="message"></div>
    <div id="error"></div>
  </div>
  <script>
    // Kyoto Station coordinates
    const KYOTO_STATION = { lat: 34.985849, lng: 135.758766 };
    // Proximity radius in meters
    const RADIUS_METERS = 30000;

    function haversineDistance(lat1, lon1, lat2, lon2) {
      const toRad = x => x * Math.PI / 180;
      const R = 6371000; // Earth radius in meters
      const dLat = toRad(lat2 - lat1);
      const dLon = toRad(lon2 - lon1);
      const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) *
                Math.sin(dLon/2) * Math.sin(dLon/2);
      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
      return R * c;
    }

    document.getElementById('checkBtn').onclick = function() {
      document.getElementById('message').textContent = '';
      document.getElementById('error').textContent = '';
      if (!navigator.geolocation) {
        document.getElementById('error').textContent = 'Geolocation is not supported by your browser.';
        return;
      }
      navigator.geolocation.getCurrentPosition(
        function(pos) {
          const { latitude, longitude } = pos.coords;
          const dist = haversineDistance(latitude, longitude, KYOTO_STATION.lat, KYOTO_STATION.lng);
          if (dist <= RADIUS_METERS) {
            document.getElementById('message').textContent = 'You are near Kyoto Station!';
          } else {
            document.getElementById('message').textContent = '';
            document.getElementById('error').textContent = 'Sorry, you are not near Kyoto Station.';
          }
        },
        function(err) {
          document.getElementById('error').textContent = 'Unable to retrieve your location. ' +
            (err.message || '');
        }
      );
    };
  </script>
</body>
</html>
